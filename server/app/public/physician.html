<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="uft-8">
        <meta name="viewport" content="width=device-width">
        <title>My Account</title>
        
        <link href="stylesheets/physician.css" rel="stylesheet" type="text/css" />
        <link href="stylesheets/style.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="./javascripts/script.js"></script>
        <script src="javascripts/physician.js" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>   <!--Chart.js for graph displays-->

        <!--3 script files are testing for drop down table-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div id="containerContent">
            <div id="banner">
                <div id="header">
                    <a href="index.html" id="header">Heart Rate Monitoring</a>
                </div>
                
                <div id="links">
                    <!-- <a href="index.html">Home</a> -->
                    <a href="reference.html">References</a> <!--TODO-->
                    <a href="signup.html">Sign Up</a>
                    <a href="login.html">Login</a>
                    <a href="physician.html">My Account</a> <!--TODO, remove from home, sign up, login pages after made-->
                </div>
            </div>
            <div id="account">
                <h2>Your Patients</h2>
                <div class="container mt-5">
                    <div class="d-flex justify-content-center row">
                        <div class="col-md-10">
                            <div class="rounded">
                                <div class="table-responsive table-borderless">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>7-day Average Heart Rate</th>
                                                <th>Max Heart Rate over past 7 days</th>
                                                <th>Min Heart Rate over past 7 days</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody class="table-body">
                                            <!--USER 1 BEGIN-->
                                            <tr class="cell-1" data-toggle="collapse" data-target="#demo">
                                                <td class="text-center">User 1</td>
                                                <td>82 bpm</td>
                                                <td>97 bpm</td>
                                                <td>68 bpm</td>
                                                <td class="table-elipse" data-toggle="collapse" data-target="#demo"><i class="fa fa-ellipsis-h text-black-50"></i></td>
                                            </tr>
                                            <tr id="demo" class="collapse cell-2 row-child">
                                                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                                                <td colspan="1">Frequency of measurements</td>
                                                <td colspan="1"><select name="frequency" id="frequency">
                                                    <option value="0">Once every 5 minutes</option>
                                                    <option value="1">Once every 10 minutes</option>
                                                    <option value="2">Once every 30 minutes</option>
                                                    <option value="3">Once every hour</option>
                                                    <option value="4">Once every 2 hours</option>
                                                    <option value="5">Once every 4 hours</option>
                                                    <option value="6">Once every 6 hours</option>
                                                    <option value="7">Once every 12 hours</option>
                                                </select></td>
                                                <td colspan="2"><button id="measurements" class="info">Save Changes</button></td>
                                            </tr>
                                            <tr id="demo" class="collapse cell-2 row-child">
                                                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                                                <td colspan="1">Select a day of the week:</td>
                                                <td colspan="1"><select name="day" class="day" onchange="displayGraph(this.options[this.selectedIndex].value)">
                                                    <option id="selectDay" selected=true disabled>Select</option>
                                                    <option value="1">Monday</option>
                                                    <option value="2">Tuesday</option>
                                                    <option value="3">Wednesday</option>
                                                    <option value="4">Thursday</option>
                                                    <option value="5">Friday</option>
                                                    <option value="6">Saturday</option>
                                                    <option value="7">Sunday</option>
                                                </select></td>
                                                <td colspan="2"></td>
                                            </tr>
                                            <!--USER 1 END-->

                                            <!--USER 2 BEGIN-->
                                            <tr class="cell-1" data-toggle="collapse" data-target="#demo2">
                                                <td class="text-center">User 2</td>
                                                <td>82 bpm</td>
                                                <td>97 bpm</td>
                                                <td>68 bpm</td>
                                                <td class="table-elipse" data-toggle="collapse" data-target="#demo2"><i class="fa fa-ellipsis-h text-black-50"></i></td>
                                            </tr>
                                            <tr id="demo2" class="collapse cell-2 row-child">
                                                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                                                <td colspan="1">Frequency of measurements</td>
                                                <td colspan="1"><select name="frequency" id="frequency">
                                                    <option value="0">Once every 5 minutes</option>
                                                    <option value="1">Once every 10 minutes</option>
                                                    <option value="2">Once every 30 minutes</option>
                                                    <option value="3">Once every hour</option>
                                                    <option value="4">Once every 2 hours</option>
                                                    <option value="5">Once every 4 hours</option>
                                                    <option value="6">Once every 6 hours</option>
                                                    <option value="7">Once every 12 hours</option>
                                                </select></td>
                                                <td colspan="2"><button id="measurements" class="info">Save Changes</button></td>
                                            </tr>
                                            <tr id="demo2" class="collapse cell-2 row-child">
                                                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                                                <td colspan="1">Select a day of the week:</td>
                                                <td colspan="1"><select name="day" class="day" onchange="displayGraph(this.options[this.selectedIndex].value)">
                                                    <option id="selectDay" selected=true disabled>Select</option>
                                                    <option value="1">Monday</option>
                                                    <option value="2">Tuesday</option>
                                                    <option value="3">Wednesday</option>
                                                    <option value="4">Thursday</option>
                                                    <option value="5">Friday</option>
                                                    <option value="6">Saturday</option>
                                                    <option value="7">Sunday</option>
                                                </select></td>
                                                <td colspan="2"></td>
                                            </tr>
                                            <!--USER 2 END-->

                                            <!--Need to implement an update system for users rather than hard code each-->

                                            <!--Graph area-->
                                            <tr class="cell-2">
                                                <td colspan="5"><button id="resetGraph">Clear Graphs</button></td>
                                            </tr>
                                            <tr class="cell-3">
                                                <td class="text-center" colspan="1"><i class="fa fa-angle-up"></i></td>
                                                <td colspan="4"><div class="graphContainer" id="graphContainer">
                                                    <canvas id="bpmGraph"></canvas>
                                                    <canvas id="oxyGraph"></canvas>
                                                    </div>
                                                
                                                <script>
                                                    var bpmChart;
                                                    var oxyChart;
                                                    
                                                    document.getElementById("resetGraph").onclick = function() {
                                                        bpmChart.destroy();
                                                        oxyChart.destroy();
                                                        var days = document.getElementsByClassName("day");
                                                        for(let i = 0; i < days.length; i++) {
                                                            days[i].selectedIndex = 0;
                                                        }
                                                    }
                        
                                                    //Cannot get function to work in account.js, moved directly into account.html
                                                    //Chooses the data for a given day (from dropdown) Assuming bpm (and other needed values are formated like this)
                                                    function dayChoice(day) {
                                                        switch(day) {
                                                            //bpm value, oxy percent;
                                                            case "1": var bpm = [1, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [1, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "2": var bpm = [2, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [2, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "3": var bpm = [3, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [3, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "4": var bpm = [4, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [4, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "5": var bpm = [5, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [5, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "6": var bpm = [6, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [6, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            case "7": var bpm = [7, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70]; 
                                                                        var oxy = [7, 80, 90, 70, 60, 78, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70];
                                                                        break;
                                                            default: var bpm = 0; oxy = 0; break;
                                                        }
                                                        return [bpm, oxy];
                                                    }
                                                    //displays daily view graph for a given day (from dropdown)
                                                    function displayGraph(day) {
                            
                                                        let [bpm, oxy] = dayChoice(day);
                                                        //some error? Shouldnt happen but just incase
                                                        if(bpm == 0) {
                                                            console.log("no choice yet");
                                                            return;
                                                        }
                            
                                                        document.getElementById("graphContainer").style.display = "block";
                                                        //bpm chart
                                                        const ctx1 = document.getElementById('bpmGraph');
                                                        bpmChart = new Chart(ctx1, {
                                                            type: 'line',
                                                            data: {
                                                                //can be replaced with times/values from board
                                                                labels: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],
                                                                datasets: [{
                                                                    label: 'Heart Rate',
                                                                    data: bpm,
                                                                    borderWidth: 1
                                                                }]
                                                            },
                                                            options: {
                                                                maintainAspectRatio: false,
                                                                scales: {
                                                                    y: {
                                                                        beginAtZero: true
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        //oxy chart
                                                        const ctx2 = document.getElementById('oxyGraph');
                                                        oxyChart = new Chart(ctx2, {
                                                            type: 'line',
                                                            data: {
                                                                //can be replaced with times/values from board
                                                                labels: ['12AM', '1AM', '2AM', '3AM', '4AM', '5AM', '6AM', '7AM', '8AM', '9AM', '10AM', '11AM', '12PM', '1PM', '2PM', '3PM', '4PM', '5PM', '6PM', '7PM', '8PM', '9PM', '10PM', '11PM'],
                                                                datasets: [{
                                                                    label: 'Oxygen Saturation',
                                                                    data: oxy,
                                                                    borderWidth: 1
                                                                }]
                                                            },
                                                            options: {
                                                                maintainAspectRatio: false,
                                                                scales: {
                                                                    y: {
                                                                        beginAtZero: true
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    }
                                                </script></td>
                                            </tr>
                                            <!--Graph area-->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <script type="text/javascript"></script>
    </body>

</html>
